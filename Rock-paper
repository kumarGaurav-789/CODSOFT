# ==============================================================================
# Task 4: Rock-Paper-Scissors Game
# This program allows a user to play Rock-Paper-Scissors against the computer.
# It includes score tracking and allows for multiple rounds.
# ==============================================================================
import random # This module is needed to make the computer's random choice
import os     # Used for clearing the screen

def clear_screen():
    """Clears the console screen for better readability during the game."""
    os.system('cls' if os.name == 'nt' else 'clear')

def get_computer_choice():
    """
    Randomly selects 'rock', 'paper', or 'scissors' for the computer's move.
    Returns:
        str: The computer's choice.
    """
    choices = ['rock', 'paper', 'scissors']
    return random.choice(choices)

def determine_winner(user_choice, computer_choice):
    """
    Determines the winner of a single round of Rock-Paper-Scissors based on the rules.

    Rules:
    - Rock beats scissors
    - Scissors beats paper
    - Paper beats rock

    Args:
        user_choice (str): The user's choice ('rock', 'paper', or 'scissors').
        computer_choice (str): The computer's choice ('rock', 'paper', or 'scissors').

    Returns:
        str: 'win' if the user wins, 'lose' if the user loses, or 'tie' if it's a draw.
    """
    if user_choice == computer_choice:
        return 'tie'
    elif (user_choice == 'rock' and computer_choice == 'scissors') or \
         (user_choice == 'scissors' and computer_choice == 'paper') or \
         (user_choice == 'paper' and computer_choice == 'rock'):
        return 'win' # User wins
    else:
        return 'lose' # User loses (computer wins)

def run_rock_paper_scissors_game():
    """
    Main function to run the Rock-Paper-Scissors game.
    It manages the game loop, user input, score tracking, and displaying results.
    """
    user_score = 0      # Initialize user's score
    computer_score = 0  # Initialize computer's score
    valid_choices = ['rock', 'paper', 'scissors'] # Define valid choices for input

    print("\n--- ROCK-PAPER-SCISSORS GAME ---")
    print("Welcome! Let's play Rock, Paper, Scissors!")

    while True:
        clear_screen() # Clear screen at the start of each round
        print(f"\n--- Current Score ---")
        print(f"You: {user_score} | Computer: {computer_score}")
        print("---------------------")

        # Get user's input
        user_input = input("Enter your choice (rock, paper, or scissors) or 'exit' to quit: ").lower().strip()

        # Check if the user wants to exit
        if user_input == 'exit':
            print("\nThanks for playing!")
            print(f"Final Score: You {user_score} - Computer {computer_score}")
            break # Exit the game loop

        # Validate user's input
        if user_input not in valid_choices:
            print("Invalid choice. Please choose 'rock', 'paper', or 'scissors'.")
            input("Press Enter to try again...") # Pause to let user read the message
            continue # Skip to the next iteration of the loop

        # Get computer's choice
        computer_choice = get_computer_choice()

        # Display choices
        print(f"\nYou chose: {user_input.capitalize()}")
        print(f"Computer chose: {computer_choice.capitalize()}")

        # Determine the winner and update scores
        result = determine_winner(user_input, computer_choice)

        if result == 'win':
            print("You win this round! üéâ")
            user_score += 1
        elif result == 'lose':
            print("You lose this round! üòî")
            computer_score += 1
        else: # result == 'tie'
            print("It's a tie this round! ü§ù")
        
        # Ask if the user wants to play another round
        play_again = input("\nPlay another round? (yes/no): ").lower().strip()
        if play_again != 'yes':
            print("\nThanks for playing!")
            print(f"Final Score: You {user_score} - Computer {computer_score}")
            break # Exit the game loop

# This line ensures that `run_rock_paper_scissors_game()` is called only when the script is executed directly,
# not when it's imported as a module into another script.
if __name__ == "__main__":
    run_rock_paper_scissors_game()
